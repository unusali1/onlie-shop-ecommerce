{"ast":null,"code":"import _slicedToArray from\"E:/Ecommerce/ecomern-frontend-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Elements}from\"@stripe/react-stripe-js\";import{loadStripe}from\"@stripe/stripe-js\";import React from\"react\";import{Alert,Col,Container,Row,Table}from\"react-bootstrap\";import{useSelector}from\"react-redux\";import CheckoutForm from\"../components/CheckoutForm\";import{useIncreaseCartProductMutation,useDecreaseCartProductMutation,useRemoveFromCartMutation}from\"../services/appApi\";import\"./CartPage.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var stripePromise=loadStripe(\"pk_test_51LhIOaJkj63K7pnU9GiT5YjHovEX50TuuxR7W0DZ5Wnb1rjsQLT22rI1sqbJCYRrmVMoqeUqTaWvAhM2RBSFOSuu00czRQnHJC\");function CartPage(){var user=useSelector(function(state){return state.user;});var products=useSelector(function(state){return state.products;});var userCartObj=user.cart;var cart=products.filter(function(product){return userCartObj[product._id]!=null;});var _useIncreaseCartProdu=useIncreaseCartProductMutation(),_useIncreaseCartProdu2=_slicedToArray(_useIncreaseCartProdu,1),increaseCart=_useIncreaseCartProdu2[0];var _useDecreaseCartProdu=useDecreaseCartProductMutation(),_useDecreaseCartProdu2=_slicedToArray(_useDecreaseCartProdu,1),decreaseCart=_useDecreaseCartProdu2[0];var _useRemoveFromCartMut=useRemoveFromCartMutation(),_useRemoveFromCartMut2=_slicedToArray(_useRemoveFromCartMut,2),removeFromCart=_useRemoveFromCartMut2[0],isLoading=_useRemoveFromCartMut2[1].isLoading;function handleDecrease(product){var quantity=user.cart.count;if(quantity<=0)return alert(\"Can't proceed\");decreaseCart(product);}return/*#__PURE__*/_jsx(Container,{style:{minHeight:\"95vh\"},className:\"cart-container\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"pt-2 h3\",children:\"Shopping cart\"}),cart.length===0?/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:\"Shopping cart is empty. Add products to your cart\"}):/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,children:/*#__PURE__*/_jsx(CheckoutForm,{})})]}),cart.length>0&&/*#__PURE__*/_jsx(Col,{md:5,children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{responsive:\"sm\",className:\"cart-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\xA0\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subtotal\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cart.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\xA0\"}),/*#__PURE__*/_jsxs(\"td\",{children:[!isLoading&&/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-times\",style:{marginRight:10,cursor:\"pointer\"},onClick:function onClick(){return removeFromCart({productId:item._id,price:item.price,userId:user._id});}}),/*#__PURE__*/_jsx(\"img\",{src:item.pictures[0].url,style:{width:100,height:100,objectFit:\"cover\"},alt:\"not found\"})]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u09F3\",item.price]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"quantity-indicator\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-minus-circle\",onClick:function onClick(){return handleDecrease({productId:item._id,price:item.price,userId:user._id});}}),/*#__PURE__*/_jsx(\"span\",{children:user.cart[item._id]}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus-circle\",onClick:function onClick(){return increaseCart({productId:item._id,price:item.price,userId:user._id});}})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u09F3\",item.price*user.cart[item._id]]})]});})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h3\",{className:\"h4 pt-4\",children:[\"Total: \\u09F3\",user.cart.total]})})]})})]})});}export default CartPage;","map":{"version":3,"names":["Elements","loadStripe","React","Alert","Col","Container","Row","Table","useSelector","CheckoutForm","useIncreaseCartProductMutation","useDecreaseCartProductMutation","useRemoveFromCartMutation","stripePromise","CartPage","user","state","products","userCartObj","cart","filter","product","_id","increaseCart","decreaseCart","removeFromCart","isLoading","handleDecrease","quantity","count","alert","minHeight","length","map","item","marginRight","cursor","productId","price","userId","pictures","url","width","height","objectFit","total"],"sources":["E:/Ecommerce/ecomern-frontend-main/src/pages/CartPage.js"],"sourcesContent":["import { Elements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport React from \"react\";\nimport { Alert, Col, Container, Row, Table } from \"react-bootstrap\";\nimport { useSelector } from \"react-redux\";\nimport CheckoutForm from \"../components/CheckoutForm\";\nimport { useIncreaseCartProductMutation, useDecreaseCartProductMutation, useRemoveFromCartMutation } from \"../services/appApi\";\nimport \"./CartPage.css\";\n\nconst stripePromise = loadStripe(\"pk_test_51LhIOaJkj63K7pnU9GiT5YjHovEX50TuuxR7W0DZ5Wnb1rjsQLT22rI1sqbJCYRrmVMoqeUqTaWvAhM2RBSFOSuu00czRQnHJC\");\n\nfunction CartPage() {\n    const user = useSelector((state) => state.user);\n    const products = useSelector((state) => state.products);\n    const userCartObj = user.cart;\n    let cart = products.filter((product) => userCartObj[product._id] != null);\n    const [increaseCart] = useIncreaseCartProductMutation();\n    const [decreaseCart] = useDecreaseCartProductMutation();\n    const [removeFromCart, { isLoading }] = useRemoveFromCartMutation();\n\n    function handleDecrease(product) {\n        const quantity = user.cart.count;\n        if (quantity <= 0) return alert(\"Can't proceed\");\n        decreaseCart(product);\n    }\n\n    return (\n        <Container style={{ minHeight: \"95vh\" }} className=\"cart-container\">\n            <Row>\n                <Col>\n                    <h1 className=\"pt-2 h3\">Shopping cart</h1>\n                    {cart.length === 0 ? (\n                        <Alert variant=\"info\">Shopping cart is empty. Add products to your cart</Alert>\n                    ) : (\n                        <Elements stripe={stripePromise}>\n                            <CheckoutForm />\n                        </Elements>\n                    )}\n                </Col>\n                {cart.length > 0 && (\n                    <Col md={5}>\n                        <>\n                            <Table responsive=\"sm\" className=\"cart-table\">\n                                <thead>\n                                    <tr>\n                                        <th>&nbsp;</th>\n                                        <th>Product</th>\n                                        <th>Price</th>\n                                        <th>Quantity</th>\n                                        <th>Subtotal</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {/* loop through cart products */}\n                                    {cart.map((item) => (\n                                        <tr>\n                                            <td>&nbsp;</td>\n                                            <td>\n                                                {!isLoading && <i className=\"fa fa-times\" style={{ marginRight: 10, cursor: \"pointer\" }} onClick={() => removeFromCart({ productId: item._id, price: item.price, userId: user._id })}></i>}\n                                                <img src={item.pictures[0].url} style={{ width: 100, height: 100, objectFit: \"cover\" }} alt=\"not found\" />\n                                            </td>\n                                            <td>৳{item.price}</td>\n                                            <td>\n                                                <span className=\"quantity-indicator\">\n                                                    <i className=\"fa fa-minus-circle\" onClick={() => handleDecrease({ productId: item._id, price: item.price, userId: user._id })}></i>\n                                                    <span>{user.cart[item._id]}</span>\n                                                    <i className=\"fa fa-plus-circle\" onClick={() => increaseCart({ productId: item._id, price: item.price, userId: user._id })}></i>\n                                                </span>\n                                            </td>\n                                            <td>৳{item.price * user.cart[item._id]}</td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </Table>\n                            <div>\n                                <h3 className=\"h4 pt-4\">Total: ৳{user.cart.total}</h3>\n                            </div>\n                        </>\n                    </Col>\n                )}\n            </Row>\n        </Container>\n    );\n}\n\nexport default CartPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}