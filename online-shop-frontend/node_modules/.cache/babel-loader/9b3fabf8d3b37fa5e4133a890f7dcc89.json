{"ast":null,"code":"import _toConsumableArray from\"E:/Ecommerce/ecomern-frontend-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"E:/Ecommerce/ecomern-frontend-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Alert,Col,Container,Form,Row,Button}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import{useCreateProductMutation}from\"../services/appApi\";import axios from\"../axios\";import\"./NewProduct.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NewProduct(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),images=_useState10[0],setImages=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),imgToRemove=_useState12[0],setImgToRemove=_useState12[1];var navigate=useNavigate();var _useCreateProductMuta=useCreateProductMutation(),_useCreateProductMuta2=_slicedToArray(_useCreateProductMuta,2),createProduct=_useCreateProductMuta2[0],_useCreateProductMuta3=_useCreateProductMuta2[1],isError=_useCreateProductMuta3.isError,error=_useCreateProductMuta3.error,isLoading=_useCreateProductMuta3.isLoading,isSuccess=_useCreateProductMuta3.isSuccess;function handleRemoveImg(imgObj){setImgToRemove(imgObj.public_id);axios.delete(\"/images/\".concat(imgObj.public_id,\"/\")).then(function(res){setImgToRemove(null);setImages(function(prev){return prev.filter(function(img){return img.public_id!==imgObj.public_id;});});}).catch(function(e){return console.log(e);});}function handleSubmit(e){e.preventDefault();if(!name||!description||!price||!category||!images.length){return alert(\"Please fill out all the fields\");}createProduct({name:name,description:description,price:price,category:category,images:images}).then(function(_ref){var data=_ref.data;if(data.length>0){setTimeout(function(){navigate(\"/\");},1500);}});}function showWidget(){var widget=window.cloudinary.createUploadWidget({cloudName:\"dddvfrdb1\",uploadPreset:\"nuc1ldiw\"},function(error,result){if(!error&&result.event===\"success\"){setImages(function(prev){return[].concat(_toConsumableArray(prev),[{url:result.info.url,public_id:result.info.public_id}]);});}});widget.open();}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,className:\"new-product__form--container\",children:/*#__PURE__*/_jsxs(Form,{style:{width:\"100%\"},onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-4\",children:\"Create a product\"}),isSuccess&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:\"Product created with succcess\"}),isError&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error.data}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Product name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter product name\",value:name,required:true,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Product description\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",placeholder:\"Product description\",style:{height:\"100px\"},value:description,required:true,onChange:function onChange(e){return setDescription(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Price(\\u09F3)\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"Price (\\u09F3)\",value:price,required:true,onChange:function onChange(e){return setPrice(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",onChange:function onChange(e){return setCategory(e.target.value);},children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Category\"}),/*#__PURE__*/_jsxs(Form.Select,{children:[/*#__PURE__*/_jsx(\"option\",{disabled:true,selected:true,children:\"-- Select One --\"}),/*#__PURE__*/_jsx(\"option\",{value:\"technology\",children:\"technology\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tablets\",children:\"tablets\"}),/*#__PURE__*/_jsx(\"option\",{value:\"phones\",children:\"phones\"}),/*#__PURE__*/_jsx(\"option\",{value:\"laptops\",children:\"laptops\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:showWidget,children:\"Upload Images\"}),/*#__PURE__*/_jsx(\"div\",{className:\"images-preview-container\",children:images.map(function(image){return/*#__PURE__*/_jsxs(\"div\",{className:\"image-preview\",children:[/*#__PURE__*/_jsx(\"img\",{src:image.url,alt:\"not found\"}),imgToRemove!==image.public_id&&/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-times-circle\",onClick:function onClick(){return handleRemoveImg(image);}})]});})})]}),/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:isLoading||isSuccess,children:\"Create Product\"})})]})}),/*#__PURE__*/_jsx(Col,{md:6,className:\"new-product__image--container\"})]})});}export default NewProduct;","map":{"version":3,"names":["React","useState","Alert","Col","Container","Form","Row","Button","useNavigate","useCreateProductMutation","axios","NewProduct","name","setName","description","setDescription","price","setPrice","category","setCategory","images","setImages","imgToRemove","setImgToRemove","navigate","createProduct","isError","error","isLoading","isSuccess","handleRemoveImg","imgObj","public_id","delete","then","res","prev","filter","img","catch","e","console","log","handleSubmit","preventDefault","length","alert","data","setTimeout","showWidget","widget","window","cloudinary","createUploadWidget","cloudName","uploadPreset","result","event","url","info","open","width","target","value","height","map","image"],"sources":["E:/Ecommerce/ecomern-frontend-main/src/pages/NewProduct.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Alert, Col, Container, Form, Row, Button } from \"react-bootstrap\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCreateProductMutation } from \"../services/appApi\";\nimport axios from \"../axios\";\nimport \"./NewProduct.css\";\n\nfunction NewProduct() {\n    const [name, setName] = useState(\"\");\n    const [description, setDescription] = useState(\"\");\n    const [price, setPrice] = useState(\"\");\n    const [category, setCategory] = useState(\"\");\n    const [images, setImages] = useState([]);\n    const [imgToRemove, setImgToRemove] = useState(null);\n    const navigate = useNavigate();\n    const [createProduct, { isError, error, isLoading, isSuccess }] = useCreateProductMutation();\n\n    function handleRemoveImg(imgObj) {\n        setImgToRemove(imgObj.public_id);\n        axios\n            .delete(`/images/${imgObj.public_id}/`)\n            .then((res) => {\n                setImgToRemove(null);\n                setImages((prev) => prev.filter((img) => img.public_id !== imgObj.public_id));\n            })\n            .catch((e) => console.log(e));\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        if (!name || !description || !price || !category || !images.length) {\n            return alert(\"Please fill out all the fields\");\n        }\n        createProduct({ name, description, price, category, images }).then(({ data }) => {\n            if (data.length > 0) {\n                setTimeout(() => {\n                    navigate(\"/\");\n                }, 1500);\n            }\n        });\n    }\n\n    function showWidget() {\n        const widget = window.cloudinary.createUploadWidget(\n            {\n                cloudName: \"dddvfrdb1\",\n                uploadPreset: \"nuc1ldiw\",\n            },\n            (error, result) => {\n                if (!error && result.event === \"success\") {\n                    setImages((prev) => [...prev, { url: result.info.url, public_id: result.info.public_id }]);\n                }\n            }\n        );\n        widget.open();\n    }\n\n    return (\n        <Container>\n            <Row>\n                <Col md={6} className=\"new-product__form--container\">\n                    <Form style={{ width: \"100%\" }} onSubmit={handleSubmit}>\n                        <h1 className=\"mt-4\">Create a product</h1>\n                        {isSuccess && <Alert variant=\"success\">Product created with succcess</Alert>}\n                        {isError && <Alert variant=\"danger\">{error.data}</Alert>}\n                        <Form.Group className=\"mb-3\">\n                            <Form.Label>Product name</Form.Label>\n                            <Form.Control type=\"text\" placeholder=\"Enter product name\" value={name} required onChange={(e) => setName(e.target.value)} />\n                        </Form.Group>\n\n                        <Form.Group className=\"mb-3\">\n                            <Form.Label>Product description</Form.Label>\n                            <Form.Control as=\"textarea\" placeholder=\"Product description\" style={{ height: \"100px\" }} value={description} required onChange={(e) => setDescription(e.target.value)} />\n                        </Form.Group>\n\n                        <Form.Group className=\"mb-3\">\n                            <Form.Label>Price(৳)</Form.Label>\n                            <Form.Control type=\"number\" placeholder=\"Price (৳)\" value={price} required onChange={(e) => setPrice(e.target.value)} />\n                        </Form.Group>\n\n                        <Form.Group className=\"mb-3\" onChange={(e) => setCategory(e.target.value)}>\n                            <Form.Label>Category</Form.Label>\n                            <Form.Select>\n                                <option disabled selected>\n                                    -- Select One --\n                                </option>\n                                <option value=\"technology\">technology</option>\n                                <option value=\"tablets\">tablets</option>\n                                <option value=\"phones\">phones</option>\n                                <option value=\"laptops\">laptops</option>\n                            </Form.Select>\n                        </Form.Group>\n\n                        <Form.Group className=\"mb-3\">\n                            <Button type=\"button\" onClick={showWidget}>\n                                Upload Images\n                            </Button>\n                            <div className=\"images-preview-container\">\n                                {images.map((image) => (\n                                    <div className=\"image-preview\">\n                                        <img src={image.url} alt=\"not found\" />\n                                        {imgToRemove !== image.public_id && <i className=\"fa fa-times-circle\" onClick={() => handleRemoveImg(image)}></i>}\n                                    </div>\n                                ))}\n                            </div>\n                        </Form.Group>\n\n                        <Form.Group>\n                            <Button type=\"submit\" disabled={isLoading || isSuccess}>\n                                Create Product\n                            </Button>\n                        </Form.Group>\n                    </Form>\n                </Col>\n                <Col md={6} className=\"new-product__image--container\"></Col>\n            </Row>\n        </Container>\n    );\n}\n\nexport default NewProduct;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}