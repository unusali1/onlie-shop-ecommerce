{"ast":null,"code":"import _objectSpread from\"E:/Ecommerce/ecomern-frontend-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/Ecommerce/ecomern-frontend-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"../axios\";import React,{useEffect,useState}from\"react\";import AliceCarousel from\"react-alice-carousel\";import\"react-alice-carousel/lib/alice-carousel.css\";import{Container,Row,Col,Badge,ButtonGroup,Form,Button}from\"react-bootstrap\";import{useSelector}from\"react-redux\";import{Link,useParams}from\"react-router-dom\";import Loading from\"../components/Loading\";import SimilarProduct from\"../components/SimilarProduct\";import\"./ProductPage.css\";import{LinkContainer}from\"react-router-bootstrap\";import{useAddToCartMutation}from\"../services/appApi\";import ToastMessage from\"../components/ToastMessage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductPage(){var _useParams=useParams(),id=_useParams.id;var user=useSelector(function(state){return state.user;});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),similar=_useState4[0],setSimilar=_useState4[1];var _useAddToCartMutation=useAddToCartMutation(),_useAddToCartMutation2=_slicedToArray(_useAddToCartMutation,2),addToCart=_useAddToCartMutation2[0],isSuccess=_useAddToCartMutation2[1].isSuccess;var handleDragStart=function handleDragStart(e){return e.preventDefault();};useEffect(function(){axios.get(\"/products/\".concat(id)).then(function(_ref){var data=_ref.data;setProduct(data.product);setSimilar(data.similar);});},[id]);if(!product){return/*#__PURE__*/_jsx(Loading,{});}var responsive={0:{items:1},568:{items:2},1024:{items:3}};var images=product.pictures.map(function(picture){return/*#__PURE__*/_jsx(\"img\",{className:\"product__carousel--image\",src:picture.url,onDragStart:handleDragStart,alt:\"not found\"});});var similarProducts=[];if(similar){similarProducts=similar.map(function(product,idx){return/*#__PURE__*/_jsx(\"div\",{className:\"item\",\"data-value\":idx,children:/*#__PURE__*/_jsx(SimilarProduct,_objectSpread({},product))});});}return/*#__PURE__*/_jsxs(Container,{className:\"pt-4\",style:{position:\"relative\"},children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:6,children:/*#__PURE__*/_jsx(AliceCarousel,{mouseTracking:true,items:images,controlsStrategy:\"alternate\"})}),/*#__PURE__*/_jsxs(Col,{lg:6,className:\"pt-4\",children:[/*#__PURE__*/_jsx(\"h1\",{children:product.name}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Badge,{bg:\"primary\",children:product.category})}),/*#__PURE__*/_jsxs(\"p\",{className:\"product__price\",children:[\"\\u09F3\",product.price]}),/*#__PURE__*/_jsxs(\"p\",{style:{textAlign:\"justify\"},className:\"py-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",product.description]}),!user&&/*#__PURE__*/_jsxs(ButtonGroup,{style:{width:\"90%\"},children:[/*#__PURE__*/_jsxs(Form.Select,{size:\"lg\",style:{width:\"40%\",borderRadius:\"0\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(Button,{size:\"lg\",children:\"Add to cart\"})})]}),user&&!user.isAdmin&&/*#__PURE__*/_jsxs(ButtonGroup,{style:{width:\"90%\"},children:[/*#__PURE__*/_jsxs(Form.Select,{size:\"lg\",style:{width:\"40%\",borderRadius:\"0\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5\"})]}),/*#__PURE__*/_jsx(Button,{size:\"lg\",onClick:function onClick(){return addToCart({userId:user._id,productId:id,price:product.price,image:product.pictures[0].url});},children:\"Add to cart\"})]}),user&&user.isAdmin&&/*#__PURE__*/_jsx(LinkContainer,{to:\"/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{size:\"lg\",children:\"Edit Product\"})}),isSuccess&&/*#__PURE__*/_jsx(ToastMessage,{bg:\"info\",title:\"Added to cart\",body:\"\".concat(product.name,\" is in your cart\")})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Similar Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center flex-wrap\",children:/*#__PURE__*/_jsx(AliceCarousel,{mouseTracking:true,items:similarProducts,responsive:responsive,controlsStrategy:\"alternate\"})})]})]});}export default ProductPage;","map":{"version":3,"names":["axios","React","useEffect","useState","AliceCarousel","Container","Row","Col","Badge","ButtonGroup","Form","Button","useSelector","Link","useParams","Loading","SimilarProduct","LinkContainer","useAddToCartMutation","ToastMessage","ProductPage","id","user","state","product","setProduct","similar","setSimilar","addToCart","isSuccess","handleDragStart","e","preventDefault","get","then","data","responsive","items","images","pictures","map","picture","url","similarProducts","idx","position","name","category","price","textAlign","description","width","borderRadius","isAdmin","userId","_id","productId","image"],"sources":["E:/Ecommerce/ecomern-frontend-main/src/pages/ProductPage.js"],"sourcesContent":["import axios from \"../axios\";\nimport React, { useEffect, useState } from \"react\";\nimport AliceCarousel from \"react-alice-carousel\";\nimport \"react-alice-carousel/lib/alice-carousel.css\";\nimport { Container, Row, Col, Badge, ButtonGroup, Form, Button } from \"react-bootstrap\";\nimport { useSelector } from \"react-redux\";\nimport { Link, useParams } from \"react-router-dom\";\nimport Loading from \"../components/Loading\";\nimport SimilarProduct from \"../components/SimilarProduct\";\nimport \"./ProductPage.css\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { useAddToCartMutation } from \"../services/appApi\";\nimport ToastMessage from \"../components/ToastMessage\";\n\nfunction ProductPage() {\n    const { id } = useParams();\n    const user = useSelector((state) => state.user);\n    const [product, setProduct] = useState(null);\n    const [similar, setSimilar] = useState(null);\n    const [addToCart, { isSuccess }] = useAddToCartMutation();\n\n    const handleDragStart = (e) => e.preventDefault();\n    useEffect(() => {\n        axios.get(`/products/${id}`).then(({ data }) => {\n            setProduct(data.product);\n            setSimilar(data.similar);\n        });\n    }, [id]);\n\n    if (!product) {\n        return <Loading />;\n    }\n    const responsive = {\n        0: { items: 1 },\n        568: { items: 2 },\n        1024: { items: 3 },\n    };\n\n    const images = product.pictures.map((picture) => <img className=\"product__carousel--image\" src={picture.url} onDragStart={handleDragStart} alt=\"not found\" />);\n\n    let similarProducts = [];\n    if (similar) {\n        similarProducts = similar.map((product, idx) => (\n            <div className=\"item\" data-value={idx}>\n                <SimilarProduct {...product} />\n            </div>\n        ));\n    }\n\n    return (\n        <Container className=\"pt-4\" style={{ position: \"relative\" }}>\n            <Row>\n                <Col lg={6}>\n                    <AliceCarousel mouseTracking items={images} controlsStrategy=\"alternate\" />\n                </Col>\n                <Col lg={6} className=\"pt-4\">\n                    <h1>{product.name}</h1>\n                    <p>\n                        <Badge bg=\"primary\">{product.category}</Badge>\n                    </p>\n                    <p className=\"product__price\">à§³{product.price}</p>\n                    <p style={{ textAlign: \"justify\" }} className=\"py-3\">\n                        <strong>Description:</strong> {product.description}\n                    </p>\n                    {!user  && (\n                        <ButtonGroup style={{ width: \"90%\" }}>\n                            <Form.Select size=\"lg\" style={{ width: \"40%\", borderRadius: \"0\" }}>\n                                <option value=\"1\">1</option>\n                                <option value=\"2\">2</option>\n                                <option value=\"3\">3</option>\n                                <option value=\"4\">4</option>\n                                <option value=\"5\">5</option>\n                            </Form.Select>\n                            <Link to=\"/login\">\n                            <Button size=\"lg\">\n                                Add to cart\n                            </Button>\n                            </Link>\n                        </ButtonGroup>\n                    )}\n                    {user && !user.isAdmin && (\n                        <ButtonGroup style={{ width: \"90%\" }}>\n                            <Form.Select size=\"lg\" style={{ width: \"40%\", borderRadius: \"0\" }}>\n                                <option value=\"1\">1</option>\n                                <option value=\"2\">2</option>\n                                <option value=\"3\">3</option>\n                                <option value=\"4\">4</option>\n                                <option value=\"5\">5</option>\n                            </Form.Select>\n                            <Button size=\"lg\" onClick={() => addToCart({ userId: user._id, productId: id, price: product.price, image: product.pictures[0].url })}>\n                                Add to cart\n                            </Button>\n                        </ButtonGroup>\n                    )}\n                    {user && user.isAdmin && (\n                        <LinkContainer to={`/product/${product._id}/edit`}>\n                            <Button size=\"lg\">Edit Product</Button>\n                        </LinkContainer>\n                    )}\n                    {isSuccess && <ToastMessage bg=\"info\" title=\"Added to cart\" body={`${product.name} is in your cart`} />}\n                </Col>\n            </Row>\n            <div className=\"my-4\">\n                <h2>Similar Products</h2>\n                <div className=\"d-flex justify-content-center align-items-center flex-wrap\">\n                    <AliceCarousel mouseTracking items={similarProducts} responsive={responsive} controlsStrategy=\"alternate\" />\n                </div>\n            </div>\n        </Container>\n    );\n}\n\nexport default ProductPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}